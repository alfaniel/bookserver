OPDS To Catalog Test
====================

This test grabs an fetches an ODPS feed using urllib, and create a
a Catalog instance from it.

>>> import bookserver

>>> import urllib
>>> url = 'http://bookserver.archive.org/catalog/'
>>> fh = urllib.urlopen(url)
>>> content = fh.read()
>>> fh.close()

>>> import bookserver.catalog.ingest.OpdsToCatalog as OpdsToCatalog
>>> ingestor = OpdsToCatalog(content, url)
>>> c = ingestor.getCatalog()

>>> r = bookserver.catalog.output.CatalogToAtom(c)
>>> str = r.toString()
>>> print str
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <title>Internet Archive OPDS</title>
  <id>urn:x-internet-archive:bookserver:catalog</id>
  <updated>2009-10-08T00:00:00Z</updated>
  <link rel="self" type="application/atom+xml" href="http://bookserver.archive.org/catalog//"/>
  <author>
    <name>Internet Archive</name>
    <uri>http://www.archive.org</uri>
  </author>
  <entry>
    <title>Alphabetical By Title</title>
    <id>urn:x-internet-archive:bookserver:catalog:titles:all</id>
    <updated>2009-10-08T00:00:00Z</updated>
    <link href="alpha.xml" type="application/atom+xml" rel="alternate"/>
    <content>Alphabetical list of all titles.</content>
  </entry>
  <entry>
    <title>Most Downloaded Books</title>
    <id>urn:x-internet-archive:bookserver:catalog:downloads</id>
    <updated>2009-10-08T00:00:00Z</updated>
    <link href="downloads.xml" type="application/atom+xml" rel="alternate"/>
    <content>The most downloaded books from the Internet Archive in the last month.</content>
  </entry>
  <entry>
    <title>Recent Scans</title>
    <id>urn:x-internet-archive:bookserver:catalog:new</id>
    <updated>2009-10-08T00:00:00Z</updated>
    <link href="new" type="application/atom+xml" rel="alternate"/>
    <content>Books most recently scanned by the Internet Archive.</content>
  </entry>
</feed>
